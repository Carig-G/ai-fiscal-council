<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI FISCAL COUNCIL ‚Äî What Congress Won't Do</title>
<meta name="description" content="Watch AI agents solve America's $1.8 trillion deficit in minutes ‚Äî something 535 members of Congress haven't done in 24 years.">
<meta property="og:title" content="AI Fiscal Council ‚Äî What Congress Won't Do">
<meta property="og:description" content="5 AI agents. 16 bipartisan proposals. 90 seconds. Watch rational actors solve what 535 members of Congress haven't touched since 2001.">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<style>
@import url('https://fonts.googleapis.com/css2?family=Bitter:wght@400;700;900&family=IBM+Plex+Mono:wght@300;400;500;600;700&family=Source+Sans+3:wght@300;400;500;600;700&display=swap');

*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#06080c;--surface:#0c0f16;--surface2:#121620;--surface3:#181d2a;
  --border:#1e2538;--border2:#2a3148;
  --text:#d8dce8;--text2:#8892aa;--text3:#505a72;
  --red:#e8364f;--red-bg:rgba(232,54,79,0.08);--red-glow:rgba(232,54,79,0.25);
  --green:#1ae88c;--green-bg:rgba(26,232,140,0.08);--green-glow:rgba(26,232,140,0.25);
  --blue:#3b82f6;--blue-bg:rgba(59,130,246,0.08);
  --gold:#f0a830;--gold-bg:rgba(240,168,48,0.08);
  --purple:#8b5cf6;--purple-bg:rgba(139,92,246,0.08);
  --cyan:#06b6d4;
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Source Sans 3',sans-serif;line-height:1.6;overflow-x:hidden}
body::after{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(6,8,12,0.03) 3px,rgba(6,8,12,0.03) 4px);pointer-events:none;z-index:9999}

/* ===== HERO ===== */
.hero{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:40px 24px;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(ellipse at 50% 40%,rgba(232,54,79,0.04) 0%,transparent 60%);animation:heroGlow 8s ease-in-out infinite alternate}
@keyframes heroGlow{0%{transform:scale(1);opacity:0.5}100%{transform:scale(1.1);opacity:1}}

.hero-badge{font-family:'IBM Plex Mono',monospace;font-size:11px;letter-spacing:3px;text-transform:uppercase;color:var(--red);border:1px solid rgba(232,54,79,0.3);padding:6px 16px;border-radius:2px;margin-bottom:32px;display:inline-block;animation:fadeUp .8s ease both}
.hero h1{font-family:'Bitter',serif;font-size:clamp(36px,6vw,72px);font-weight:900;line-height:1.1;max-width:900px;margin-bottom:20px;animation:fadeUp .8s ease .1s both}
.hero h1 .accent{background:linear-gradient(135deg,var(--red),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero .lead{font-size:clamp(16px,2.2vw,22px);color:var(--text2);max-width:680px;margin-bottom:16px;font-weight:300;animation:fadeUp .8s ease .2s both}
.hero .lead strong{color:var(--text);font-weight:600}

@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* SHAME STATS */
.shame-row{display:flex;gap:clamp(16px,4vw,48px);margin:32px 0;flex-wrap:wrap;justify-content:center;animation:fadeUp .8s ease .3s both}
.shame-stat{text-align:center;min-width:140px}
.shame-stat .num{font-family:'IBM Plex Mono',monospace;font-size:clamp(28px,4vw,48px);font-weight:700;color:var(--red);line-height:1}
.shame-stat .lbl{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text3);margin-top:6px}

.hero-debt{font-family:'IBM Plex Mono',monospace;font-size:clamp(14px,2vw,20px);color:var(--red);margin:24px 0;padding:12px 24px;border:1px solid rgba(232,54,79,0.2);background:var(--red-bg);border-radius:4px;animation:fadeUp .8s ease .4s both}
.hero-debt .tick{animation:pulse 1s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

.begin-btn{font-family:'IBM Plex Mono',monospace;font-size:14px;letter-spacing:2px;text-transform:uppercase;padding:16px 48px;background:transparent;border:2px solid var(--green);color:var(--green);cursor:pointer;border-radius:4px;transition:all .3s;animation:fadeUp .8s ease .5s both;position:relative;overflow:hidden}
.begin-btn:hover{background:var(--green);color:var(--bg);box-shadow:0 0 40px var(--green-glow)}
.begin-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(26,232,140,0.1),transparent);transition:left .5s}
.begin-btn:hover::before{left:100%}

.scroll-hint{position:absolute;bottom:30px;font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--text3);animation:bob 2s ease-in-out infinite}
@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(8px)}}

/* ===== SIMULATION SECTION ===== */
.sim-section{display:none;min-height:100vh;padding:0}
.sim-section.active{display:block}

/* TOP BAR */
.sim-topbar{position:sticky;top:0;z-index:100;background:rgba(6,8,12,0.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);padding:12px 24px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
.sim-topbar .title-area{display:flex;align-items:center;gap:16px}
.sim-topbar h2{font-family:'Bitter',serif;font-size:16px;font-weight:700}
.sim-topbar .round-tag{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:2px;padding:3px 10px;border-radius:2px;background:var(--blue-bg);color:var(--blue);border:1px solid rgba(59,130,246,0.2)}
.topbar-stats{display:flex;gap:20px;align-items:center}
.topbar-stat{text-align:center}
.topbar-stat .val{font-family:'IBM Plex Mono',monospace;font-size:16px;font-weight:700}
.topbar-stat .lbl{font-family:'IBM Plex Mono',monospace;font-size:8px;letter-spacing:1.5px;text-transform:uppercase;color:var(--text3)}

/* PROGRESS */
.sim-progress{height:3px;background:var(--surface2);position:sticky;top:60px;z-index:99}
.sim-progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--green),var(--cyan));transition:width .8s ease;box-shadow:0 0 12px var(--green-glow)}

/* MAIN GRID */
.sim-grid{display:grid;grid-template-columns:280px 1fr 300px;min-height:calc(100vh - 66px);gap:0}
@media(max-width:1100px){.sim-grid{grid-template-columns:1fr;}}

/* LEFT - CONGRESS PANEL */
.congress-panel{border-right:1px solid var(--border);padding:16px;overflow-y:auto;max-height:calc(100vh - 66px);position:sticky;top:66px}
@media(max-width:1100px){.congress-panel{position:relative;top:0;max-height:none;border-right:none;border-bottom:1px solid var(--border)}}
.section-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--text3);margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid var(--border)}

/* CHAMBER CARDS */
.chamber{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:14px;margin-bottom:12px}
.chamber-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.chamber-name{font-family:'Bitter',serif;font-size:14px;font-weight:700}
.chamber-count{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--text3)}
.party-bar{display:flex;height:6px;border-radius:3px;overflow:hidden;gap:2px;margin-bottom:8px}
.party-bar .rep{background:#e8364f;border-radius:3px}
.party-bar .dem{background:#3b82f6;border-radius:3px}
.party-bar .ind{background:#f0a830;border-radius:3px}
.chamber-detail{font-size:11px;color:var(--text2);line-height:1.5}
.chamber-detail span{font-family:'IBM Plex Mono',monospace;font-size:10px}

/* AGENT CARDS */
.agents-section{margin-top:16px}
.agent{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:12px;margin-bottom:8px;position:relative;overflow:hidden;transition:all .3s}
.agent.active{border-color:var(--green);box-shadow:0 0 16px var(--green-glow)}
.agent .think-line{position:absolute;top:0;left:0;height:2px;width:0;background:var(--green)}
.agent.active .think-line{animation:thinkPulse 2.5s ease-in-out infinite}
@keyframes thinkPulse{0%{width:0;left:0}50%{width:100%;left:0}100%{width:0;left:100%}}
.agent-top{display:flex;align-items:center;gap:8px;margin-bottom:6px}
.agent-icon{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;flex-shrink:0}
.agent-name{font-family:'IBM Plex Mono',monospace;font-size:11px;font-weight:600;letter-spacing:.5px}
.agent-desc{font-family:'IBM Plex Mono',monospace;font-size:8px;color:var(--text3);letter-spacing:1px;text-transform:uppercase}
.agent-msg{font-size:11px;color:var(--text2);min-height:18px;line-height:1.4}
.agent-msg .hl{color:var(--green)}

/* CENTER - VISUALIZATIONS */
.viz-panel{padding:20px;overflow-y:auto;max-height:calc(100vh - 66px);position:sticky;top:66px}
@media(max-width:1100px){.viz-panel{position:relative;top:0;max-height:none}}

.viz-card{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:20px;margin-bottom:16px}
.viz-title{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--text3);margin-bottom:4px}
.viz-subtitle{font-size:12px;color:var(--text2);margin-bottom:14px}
.chart-legend{display:flex;gap:16px;margin-bottom:10px;flex-wrap:wrap}
.legend-item{display:flex;align-items:center;gap:5px;font-family:'IBM Plex Mono',monospace;font-size:9px;color:var(--text3)}
.legend-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}

canvas{width:100%!important}

/* BUDGET BARS */
.budget-section{display:grid;grid-template-columns:1fr 48px 1fr;gap:0}
.budget-col h4{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}
.budget-col.rev h4{color:var(--green)}
.budget-col.spend h4{color:var(--red)}
.b-item{display:flex;justify-content:space-between;align-items:center;padding:5px 8px;margin-bottom:3px;border-radius:3px;font-size:11px;position:relative;overflow:hidden;background:var(--surface2)}
.b-item .fill{position:absolute;left:0;top:0;bottom:0;opacity:.12;transition:width .8s ease}
.b-item .nm{position:relative;z-index:1;font-size:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:130px}
.b-item .vl{position:relative;z-index:1;font-family:'IBM Plex Mono',monospace;font-size:10px;font-weight:500}
.b-item.cut .vl{color:var(--green)}
.b-item.grew .vl{color:var(--blue)}
.budget-mid{display:flex;align-items:center;justify-content:center}
.deficit-pill{writing-mode:vertical-rl;font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:2px;text-transform:uppercase;padding:8px 5px;border-radius:3px;text-align:center}
.deficit-pill.neg{color:var(--red);background:var(--red-bg);border:1px solid rgba(232,54,79,0.15)}
.deficit-pill.pos{color:var(--green);background:var(--green-bg);border:1px solid rgba(26,232,140,0.15)}

/* RIGHT - LOG PANEL */
.log-panel{border-left:1px solid var(--border);display:flex;flex-direction:column;max-height:calc(100vh - 66px);position:sticky;top:66px}
@media(max-width:1100px){.log-panel{position:relative;top:0;max-height:600px;border-left:none;border-top:1px solid var(--border)}}
.log-header{padding:16px 16px 0}
.log-stats{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:12px}
.log-stat{background:var(--surface);border:1px solid var(--border);border-radius:4px;padding:8px;text-align:center}
.log-stat .sv{font-family:'IBM Plex Mono',monospace;font-size:20px;font-weight:700;line-height:1}
.log-stat .sl{font-family:'IBM Plex Mono',monospace;font-size:7px;letter-spacing:1.5px;text-transform:uppercase;color:var(--text3);margin-top:3px}
.log-scroll{flex:1;overflow-y:auto;padding:0 16px 16px}

.log-entry{padding:10px;border-left:2px solid var(--border);margin-bottom:8px;animation:slideIn .4s ease both}
@keyframes slideIn{from{opacity:0;transform:translateX(10px)}to{opacity:1;transform:translateX(0)}}
.log-entry.pass{border-left-color:var(--green)}
.log-entry.fail{border-left-color:var(--red)}
.log-entry.info{border-left-color:var(--cyan)}
.log-agent{font-family:'IBM Plex Mono',monospace;font-size:8px;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:3px}
.log-text{font-size:11px;line-height:1.5}
.log-text strong{color:var(--text)}
.log-impact{font-family:'IBM Plex Mono',monospace;font-size:10px;margin-top:4px}
.log-votes{font-family:'IBM Plex Mono',monospace;font-size:8px;color:var(--text3);margin-top:3px;line-height:1.4}

/* VOTE VISUALIZATION */
.vote-viz{display:flex;gap:3px;margin-top:6px;flex-wrap:wrap}
.vote-viz .dot{width:5px;height:5px;border-radius:50%;transition:all .3s}

/* CONTROLS */
.log-controls{padding:12px 16px;border-top:1px solid var(--border);display:flex;gap:6px}
.ctrl-btn{flex:1;font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:1px;text-transform:uppercase;padding:10px;border:1px solid var(--border);background:var(--surface);color:var(--text);border-radius:4px;cursor:pointer;transition:all .2s}
.ctrl-btn:hover{border-color:var(--text3);background:var(--surface2)}
.ctrl-btn.go{border-color:var(--green);color:var(--green)}
.ctrl-btn.go:hover{background:var(--green);color:var(--bg);box-shadow:0 0 20px var(--green-glow)}

/* ===== RESULTS SECTION ===== */
.results{display:none;padding:60px 24px;text-align:center}
.results.active{display:block}
.results h2{font-family:'Bitter',serif;font-size:clamp(28px,4vw,48px);font-weight:900;margin-bottom:8px}
.results h2 .green{color:var(--green)}
.results .results-sub{font-size:18px;color:var(--text2);margin-bottom:40px;max-width:600px;margin-left:auto;margin-right:auto}

.compare-grid{display:grid;grid-template-columns:1fr 1fr;max-width:800px;margin:0 auto 48px;gap:20px}
@media(max-width:600px){.compare-grid{grid-template-columns:1fr}}
.compare-card{padding:32px 24px;border-radius:8px;border:1px solid var(--border)}
.compare-card.congress{background:var(--red-bg);border-color:rgba(232,54,79,0.2)}
.compare-card.ai{background:var(--green-bg);border-color:rgba(26,232,140,0.2)}
.compare-card .cc-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:3px;text-transform:uppercase;margin-bottom:16px}
.compare-card.congress .cc-label{color:var(--red)}
.compare-card.ai .cc-label{color:var(--green)}
.compare-card .cc-stat{margin-bottom:12px}
.compare-card .cc-num{font-family:'IBM Plex Mono',monospace;font-size:clamp(24px,3vw,36px);font-weight:700}
.compare-card .cc-desc{font-size:12px;color:var(--text2)}

.final-quote{max-width:640px;margin:0 auto 40px;font-family:'Bitter',serif;font-size:clamp(18px,2.5vw,26px);font-weight:400;line-height:1.5;color:var(--text2);font-style:italic}
.final-quote strong{color:var(--text);font-style:normal}

.share-row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-bottom:40px}
.share-btn{font-family:'IBM Plex Mono',monospace;font-size:11px;letter-spacing:1px;padding:12px 24px;border:1px solid var(--border);background:var(--surface);color:var(--text);border-radius:4px;cursor:pointer;transition:all .2s;text-decoration:none}
.share-btn:hover{border-color:var(--text3);background:var(--surface2)}

.restart-btn{font-family:'IBM Plex Mono',monospace;font-size:11px;letter-spacing:1px;text-transform:uppercase;padding:12px 32px;border:1px solid var(--border);background:transparent;color:var(--text3);border-radius:4px;cursor:pointer;transition:all .2s}
.restart-btn:hover{color:var(--text);border-color:var(--text3)}

/* FOOTER */
.footer{text-align:center;padding:40px 24px;border-top:1px solid var(--border);font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--text3);letter-spacing:1px}
.footer a{color:var(--text2);text-decoration:none}
.footer a:hover{color:var(--text)}

/* UTILITY */
.hidden{display:none!important}
</style>
</head>
<body>

<!-- ========== HERO ========== -->
<section class="hero" id="heroSection">
  <div class="hero-badge">Simulation ¬∑ Real U.S. Fiscal Data</div>
  <h1>What <span class="accent">535 Members of Congress</span> Won't Do</h1>
  <p class="lead">The United States has not had a budget surplus since <strong>2001</strong>. In that time, the national debt has grown from <strong>$5.7 trillion</strong> to over <strong>$36 trillion</strong>. Watch 5 AI agents do in 90 seconds what Congress hasn't done in <strong>24 years</strong>.</p>

  <div class="shame-row">
    <div class="shame-stat"><div class="num">435</div><div class="lbl">House Members</div></div>
    <div class="shame-stat"><div class="num">100</div><div class="lbl">Senators</div></div>
    <div class="shame-stat"><div class="num">24</div><div class="lbl">Years of Deficits</div></div>
    <div class="shame-stat"><div class="num">$0</div><div class="lbl">Surpluses Since '01</div></div>
  </div>

  <div class="hero-debt">
    National Debt: <strong id="heroDebt">$36,400,000,000,000</strong>
    &nbsp;<span class="tick">‚óè</span>&nbsp;
    <span style="color:var(--text2)">+$70,843/sec</span>
  </div>

  <button class="begin-btn" onclick="beginSimulation()">‚ñ∂&nbsp; Launch Simulation</button>
  <div class="scroll-hint">‚Üì</div>
</section>

<!-- ========== SIMULATION ========== -->
<section class="sim-section" id="simSection">
  <div class="sim-topbar">
    <div class="title-area">
      <h2>AI FISCAL COUNCIL</h2>
      <span class="round-tag" id="roundTag">INITIALIZING</span>
    </div>
    <div class="topbar-stats">
      <div class="topbar-stat"><div class="val" id="tbDebt" style="color:var(--red)">$36.4T</div><div class="lbl">Nat'l Debt</div></div>
      <div class="topbar-stat"><div class="val" id="tbDeficit" style="color:var(--red)">-$1,830B</div><div class="lbl">Deficit</div></div>
      <div class="topbar-stat"><div class="val" id="tbSaved" style="color:var(--green)">$0</div><div class="lbl">Saved/yr</div></div>
    </div>
  </div>
  <div class="sim-progress"><div class="sim-progress-fill" id="progFill"></div></div>

  <div class="sim-grid">
    <!-- LEFT -->
    <div class="congress-panel">
      <div class="section-label">119th United States Congress</div>

      <div class="chamber">
        <div class="chamber-header">
          <span class="chamber-name">U.S. House</span>
          <span class="chamber-count">435 Members</span>
        </div>
        <div class="party-bar">
          <div class="rep" style="flex:220"></div>
          <div class="dem" style="flex:215"></div>
        </div>
        <div class="chamber-detail">
          <span style="color:var(--red)">‚óè 220 R</span> &nbsp;
          <span style="color:var(--blue)">‚óè 215 D</span><br>
          Budget Chair: <strong>Jodey Arrington</strong> (R-TX)<br>
          Ranking: <strong>Brendan Boyle</strong> (D-PA)
        </div>
      </div>

      <div class="chamber">
        <div class="chamber-header">
          <span class="chamber-name">U.S. Senate</span>
          <span class="chamber-count">100 Members</span>
        </div>
        <div class="party-bar">
          <div class="rep" style="flex:53"></div>
          <div class="dem" style="flex:45"></div>
          <div class="ind" style="flex:2"></div>
        </div>
        <div class="chamber-detail">
          <span style="color:var(--red)">‚óè 53 R</span> &nbsp;
          <span style="color:var(--blue)">‚óè 45 D</span> &nbsp;
          <span style="color:var(--gold)">‚óè 2 I</span><br>
          Budget Chair: <strong>Lindsey Graham</strong> (R-SC)<br>
          Ranking: <strong>Jeff Merkley</strong> (D-OR)
        </div>
      </div>

      <div class="chamber" style="background:var(--red-bg);border-color:rgba(232,54,79,0.15)">
        <div class="chamber-header">
          <span class="chamber-name" style="color:var(--red)">Congressional Record</span>
        </div>
        <div class="chamber-detail" style="font-size:11px">
          Last surplus: <strong>FY 2001</strong><br>
          Debt added since: <strong>+$30.7 trillion</strong><br>
          Debt limit raised: <strong>22 times since 2001</strong><br>
          Balanced budgets passed: <strong>0</strong><br>
          Avg annual deficit: <strong>$1.28 trillion</strong>
        </div>
      </div>

      <div class="section-label" style="margin-top:16px">AI Negotiation Agents</div>
      <div class="agents-section" id="agentsContainer">
        <div class="agent" id="ag-hamilton">
          <div class="think-line"></div>
          <div class="agent-top">
            <div class="agent-icon" style="background:var(--red-bg);border:1px solid rgba(232,54,79,0.2)">ü¶Ö</div>
            <div><div class="agent-name">HAMILTON</div><div class="agent-desc">Fiscal Discipline</div></div>
          </div>
          <div class="agent-msg" id="msg-hamilton">Standing by...</div>
        </div>
        <div class="agent" id="ag-keynes">
          <div class="think-line"></div>
          <div class="agent-top">
            <div class="agent-icon" style="background:var(--green-bg);border:1px solid rgba(26,232,140,0.2)">üìà</div>
            <div><div class="agent-name">KEYNES</div><div class="agent-desc">Revenue & Growth</div></div>
          </div>
          <div class="agent-msg" id="msg-keynes">Standing by...</div>
        </div>
        <div class="agent" id="ag-rawls">
          <div class="think-line"></div>
          <div class="agent-top">
            <div class="agent-icon" style="background:var(--blue-bg);border:1px solid rgba(59,130,246,0.2)">üõ°Ô∏è</div>
            <div><div class="agent-name">RAWLS</div><div class="agent-desc">Social Equity</div></div>
          </div>
          <div class="agent-msg" id="msg-rawls">Standing by...</div>
        </div>
        <div class="agent" id="ag-marshall">
          <div class="think-line"></div>
          <div class="agent-top">
            <div class="agent-icon" style="background:var(--gold-bg);border:1px solid rgba(240,168,48,0.2)">‚öîÔ∏è</div>
            <div><div class="agent-name">MARSHALL</div><div class="agent-desc">National Security</div></div>
          </div>
          <div class="agent-msg" id="msg-marshall">Standing by...</div>
        </div>
        <div class="agent" id="ag-madison">
          <div class="think-line"></div>
          <div class="agent-top">
            <div class="agent-icon" style="background:var(--purple-bg);border:1px solid rgba(139,92,246,0.2)">‚öñÔ∏è</div>
            <div><div class="agent-name">MADISON</div><div class="agent-desc">Consensus Builder</div></div>
          </div>
          <div class="agent-msg" id="msg-madison">Standing by...</div>
        </div>
      </div>
    </div>

    <!-- CENTER -->
    <div class="viz-panel">
      <div class="viz-card">
        <div class="viz-title">10-Year Debt Trajectory</div>
        <div class="viz-subtitle">CBO baseline projection vs. AI Council path ‚Äî trillions USD</div>
        <div class="chart-legend">
          <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>CBO Baseline (no action)</div>
          <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div>AI Council Path</div>
        </div>
        <canvas id="mainChart" height="260"></canvas>
      </div>

      <div class="viz-card">
        <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:10px">
          <div>
            <div class="viz-title">Federal Budget ‚Äî FY2025</div>
            <div class="viz-subtitle">Real-time rebalancing as proposals pass</div>
          </div>
          <div class="round-tag" id="budgetRound" style="font-size:9px">BASELINE</div>
        </div>
        <div class="budget-section">
          <div class="budget-col rev">
            <h4>Revenue $<span id="tRev">4,920</span>B</h4>
            <div id="revItems"></div>
          </div>
          <div class="budget-mid">
            <div class="deficit-pill neg" id="dPill">DEFICIT<br>-$1,830B</div>
          </div>
          <div class="budget-col spend">
            <h4>Spending $<span id="tSpend">6,750</span>B</h4>
            <div id="spendItems"></div>
          </div>
        </div>
      </div>

      <!-- HOUSE FLOOR VOTE VIZ -->
      <div class="viz-card" id="voteVizCard">
        <div class="viz-title">Simulated Floor Vote ‚Äî 535 Seats</div>
        <div class="viz-subtitle">Each dot = 1 member of Congress. Watch bipartisan coalitions form.</div>
        <div style="margin-bottom:6px">
          <span style="font-family:'IBM Plex Mono',monospace;font-size:9px;color:var(--text3)">HOUSE (435)</span>
        </div>
        <div id="houseVoteDots" style="display:flex;flex-wrap:wrap;gap:2px;margin-bottom:12px"></div>
        <div style="margin-bottom:6px">
          <span style="font-family:'IBM Plex Mono',monospace;font-size:9px;color:var(--text3)">SENATE (100)</span>
        </div>
        <div id="senateVoteDots" style="display:flex;flex-wrap:wrap;gap:2px"></div>
        <div style="margin-top:10px;display:flex;gap:16px">
          <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div>Yea</div>
          <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>Nay</div>
          <div class="legend-item"><div class="legend-dot" style="background:var(--text3)"></div>Not voting</div>
        </div>
      </div>
    </div>

    <!-- RIGHT - LOG -->
    <div class="log-panel">
      <div class="log-header">
        <div class="section-label">Council Decisions</div>
        <div class="log-stats">
          <div class="log-stat"><div class="sv" id="lsReduced" style="color:var(--green)">0%</div><div class="sl">Deficit Cut</div></div>
          <div class="log-stat"><div class="sv" id="lsPassed" style="color:var(--blue)">0</div><div class="sl">Passed</div></div>
          <div class="log-stat"><div class="sv" id="lsConsensus" style="color:var(--purple)">‚Äî</div><div class="sl">Consensus</div></div>
          <div class="log-stat"><div class="sv" id="ls10yr" style="color:var(--cyan)">$0T</div><div class="sl">10yr Savings</div></div>
        </div>
      </div>
      <div class="log-scroll" id="logScroll">
        <div style="text-align:center;color:var(--text3);padding:60px 10px;font-size:12px">
          Simulation will begin shortly...
        </div>
      </div>
      <div class="log-controls">
        <button class="ctrl-btn" id="speedBtn" onclick="toggleSpeed()">1√ó Speed</button>
        <button class="ctrl-btn" onclick="resetAll()">‚Ü∫ Reset</button>
      </div>
    </div>
  </div>
</section>

<!-- ========== RESULTS ========== -->
<section class="results" id="resultsSection">
  <h2>The Council has <span class="green">reached consensus.</span></h2>
  <p class="results-sub">5 AI agents, operating without campaign donors, lobbyists, or reelection pressure, solved what 535 members of Congress have failed to address for a generation.</p>

  <div class="compare-grid">
    <div class="compare-card congress">
      <div class="cc-label">‚óè 119th Congress (Real)</div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--red)">535</div><div class="cc-desc">Members of Congress</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--red)">24 years</div><div class="cc-desc">Since last surplus (FY 2001)</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--red)">+$30.7T</div><div class="cc-desc">Debt added since 2001</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--red)" id="rCongDeficit">$1,830B</div><div class="cc-desc">Current annual deficit (FY2025)</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--red)">$65.8T</div><div class="cc-desc">Projected debt by 2035 (CBO)</div></div>
    </div>
    <div class="compare-card ai">
      <div class="cc-label">‚óè AI Fiscal Council</div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--green)">5</div><div class="cc-desc">AI agents</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--green)">~90 sec</div><div class="cc-desc">Time to consensus</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--green)" id="rAISaved">‚Äî</div><div class="cc-desc">Annual deficit reduction</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--green)" id="rAIDeficit">‚Äî</div><div class="cc-desc">Remaining annual deficit</div></div>
      <div class="cc-stat"><div class="cc-num" style="color:var(--green)" id="rAIDebt2035">‚Äî</div><div class="cc-desc">Projected debt by 2035</div></div>
    </div>
  </div>

  <div class="final-quote">
    "The solutions exist. The math works. The only thing missing is <strong>the will to act without self-interest</strong>."
  </div>

  <div class="share-row">
    <a class="share-btn" id="shareTwitter" href="#" target="_blank" rel="noopener">Share on X / Twitter</a>
    <button class="share-btn" onclick="copyLink()">Copy Link</button>
  </div>

  <button class="restart-btn" onclick="resetAll()">‚Ü∫ Run Simulation Again</button>
</section>

<footer class="footer">
  Data: U.S. Treasury, CBO, Congressional Research Service ¬∑ FY2025 figures ¬∑ Simulation for educational purposes<br>
  Built to demonstrate what rational governance could look like ¬∑ <a href="https://fiscaldata.treasury.gov" target="_blank" rel="noopener">fiscaldata.treasury.gov</a>
</footer>

<script>
// ==============================
// REAL U.S. FISCAL DATA ‚Äî FY2025
// Sources: CBO, Treasury, CRS
// ==============================
const DATA = {
  debt: 36_400_000_000_000,
  grossDebt: 38_560_000_000_000,
  perSec: 70843,
  debtToGDP: 121,
  gdp: 29_700_000_000_000,

  revenue: {
    'Individual Income Tax': 2440,
    'Payroll Taxes': 1780,
    'Corporate Tax': 420,
    'Excise & Customs': 180,
    'Other Revenue': 100,
  },
  totalRev: 4920,

  spending: {
    'Social Security': 1520,
    'Medicare': 930,
    'Medicaid & ACA': 680,
    'Net Interest': 1050,
    'Defense': 895,
    'Veterans': 340,
    'Income Security': 490,
    'Other Discretionary': 520,
    'Education': 130,
    'Other Mandatory': 195,
  },
  totalSpend: 6750,
  deficit: 1830,

  // CBO 10-year baseline (public debt, trillions)
  cboPath: [36.4, 38.6, 41.0, 43.5, 46.2, 49.0, 52.0, 55.2, 58.6, 62.1, 65.8],
  years: [2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035],

  // Congressional composition ‚Äî 119th Congress
  house: { total: 435, r: 220, d: 215 },
  senate: { total: 100, r: 53, d: 45, i: 2 },
};

// ==============================
// PROPOSALS ‚Äî Each goes through House + Senate vote
// ==============================
const PROPOSALS = [
  {round:1,agent:'KEYNES',color:'var(--green)',title:'Corporate Tax to 25%',desc:'Raise effective corporate rate from ~15% to 25%, closing loopholes. Remains competitive with OECD avg of 23.5%.',revŒî:{'Corporate Tax':180},spendŒî:{},impact:'+$180B/yr',houseYea:248,houseNay:187,senYea:58,senNay:42},
  {round:1,agent:'HAMILTON',color:'var(--red)',title:'Raise Payroll Tax Cap to $250K',desc:'Lift Social Security tax cap from $176K to $250K. Affects top 6% of earners. Extends trust fund solvency by 15 years.',revŒî:{'Payroll Taxes':120},spendŒî:{},impact:'+$120B/yr',houseYea:262,houseNay:173,senYea:64,senNay:36},
  {round:2,agent:'HAMILTON',color:'var(--red)',title:'Medicare Drug Negotiation √ó5',desc:'Expand IRA drug negotiation to 100 drugs by 2028 (from 20). CBO scores this as significant mandatory savings.',revŒî:{},spendŒî:{'Medicare':-95},impact:'-$95B/yr',houseYea:301,houseNay:134,senYea:72,senNay:28},
  {round:2,agent:'MARSHALL',color:'var(--gold)',title:'Defense Procurement Reform',desc:'End cost-plus contracts where feasible. Competitive bidding mandate saves 8% on equipment acquisition without reducing capability.',revŒî:{},spendŒî:{'Defense':-72},impact:'-$72B/yr',houseYea:278,houseNay:157,senYea:66,senNay:34},
  {round:3,agent:'KEYNES',color:'var(--green)',title:'Carbon Tax ‚Äî $50/ton',desc:'Carbon tax starting $50/ton, rising 5%/yr. Revenue-neutral for bottom 60% via dividend. Prices externality, generates net revenue.',revŒî:{'Excise & Customs':95},spendŒî:{},impact:'+$95B/yr net',houseYea:226,houseNay:209,senYea:52,senNay:48},
  {round:3,agent:'RAWLS',color:'var(--blue)',title:'Medicaid Value-Based Care Shift',desc:'Transition to value-based models, cut admin overhead 12%. Maintain coverage, reduce cost per enrollee. Bipartisan support in every study.',revŒî:{},spendŒî:{'Medicaid & ACA':-60},impact:'-$60B/yr',houseYea:342,houseNay:93,senYea:78,senNay:22},
  {round:4,agent:'MADISON',color:'var(--purple)',title:'Debt Maturity Restructuring',desc:'Shift 15% of short-term Treasury debt to 20-30yr bonds. Lock lower long-term rates. Reduces annual interest burden.',revŒî:{},spendŒî:{'Net Interest':-85},impact:'-$85B/yr interest',houseYea:310,houseNay:125,senYea:74,senNay:26},
  {round:4,agent:'HAMILTON',color:'var(--red)',title:'Federal Agency Consolidation',desc:'Merge 12 overlapping agencies (per GAO report). AI-assisted processing. 8% headcount reduction through attrition over 5 years.',revŒî:{},spendŒî:{'Other Discretionary':-55},impact:'-$55B/yr',houseYea:254,houseNay:181,senYea:60,senNay:40},
  {round:5,agent:'RAWLS',color:'var(--blue)',title:'Estate Tax Reform',desc:'Lower exemption to $5M (from $13.6M). Close stepped-up basis loophole. Affects top 0.5% of estates.',revŒî:{'Other Revenue':60},spendŒî:{},impact:'+$60B/yr',houseYea:232,houseNay:203,senYea:54,senNay:46},
  {round:5,agent:'KEYNES',color:'var(--green)',title:'Capital Gains above $1M as Income',desc:'Tax capital gains above $1M threshold as ordinary income. Maintain preferential rate below. Addresses "carried interest" inequity.',revŒî:{'Individual Income Tax':110},spendŒî:{},impact:'+$110B/yr',houseYea:228,houseNay:207,senYea:52,senNay:48},
  {round:6,agent:'RAWLS',color:'var(--blue)',title:'Safety Net Consolidation',desc:'Merge 14 overlapping anti-poverty programs into unified system. 20% admin savings. Better targeting, same coverage.',revŒî:{},spendŒî:{'Income Security':-65},impact:'-$65B/yr',houseYea:298,houseNay:137,senYea:70,senNay:30},
  {round:6,agent:'MARSHALL',color:'var(--gold)',title:'Social Security Retirement Age ‚Üí 69',desc:'Raise full retirement age from 67 to 69 over 20 years (born after 1975). Add means-testing for top 5%. Preserves program solvency.',revŒî:{},spendŒî:{'Social Security':-80},impact:'-$80B/yr by 2035',houseYea:240,houseNay:195,senYea:56,senNay:44},
  {round:7,agent:'KEYNES',color:'var(--green)',title:'Full IRS Enforcement Funding',desc:'Close the $600B/yr tax gap. Every $1 invested returns $5-12 collected. Unanimous CBO & Treasury support for ROI.',revŒî:{'Individual Income Tax':140},spendŒî:{},impact:'+$140B/yr net',houseYea:334,houseNay:101,senYea:82,senNay:18},
  {round:7,agent:'MADISON',color:'var(--purple)',title:'All-Payer Hospital Rate Setting',desc:'Mandate price transparency. Cap healthcare cost growth at GDP+1% (vs. GDP+3%). Maryland model scaled nationally.',revŒî:{},spendŒî:{'Medicare':-45,'Medicaid & ACA':-30},impact:'-$75B/yr',houseYea:286,houseNay:149,senYea:68,senNay:32},
  {round:8,agent:'MADISON',color:'var(--purple)',title:'Fiscal Responsibility Framework',desc:'Statutory debt-to-GDP target of 80% within 15 years. Automatic stabilizers pause during recession. Binding enforcement.',revŒî:{},spendŒî:{'Other Mandatory':-40},impact:'Structural reform',houseYea:356,houseNay:79,senYea:84,senNay:16},
  {round:8,agent:'HAMILTON',color:'var(--red)',title:'Surplus Sinking Fund Mandate',desc:'50% of any future surplus mandated toward debt principal. Accelerates deleveraging. Similar to post-WWII debt reduction strategy.',revŒî:{},spendŒî:{},impact:'Structural ‚Äî debt acceleration',houseYea:380,houseNay:55,senYea:90,senNay:10},
];

// ==============================
// STATE
// ==============================
let S = reset();
function reset() {
  return {
    running:false, round:0, maxRounds:8,
    rev:{...DATA.revenue}, spend:{...DATA.spending},
    tRev:DATA.totalRev, tSpend:DATA.totalSpend, deficit:DATA.deficit,
    aiPath:[36.4], passed:0, total:0, speed:1, timers:[],
  };
}

// ==============================
// HERO DEBT CLOCK
// ==============================
let heroClock = DATA.grossDebt;
setInterval(()=>{
  heroClock += DATA.perSec;
  const el = document.getElementById('heroDebt');
  if(el) el.textContent = '$' + Math.floor(heroClock).toLocaleString();
},1000);

// ==============================
// INIT VOTE DOTS
// ==============================
function initVoteDots(){
  const hc = document.getElementById('houseVoteDots');
  const sc = document.getElementById('senateVoteDots');
  hc.innerHTML=''; sc.innerHTML='';
  // House: 220 R, 215 D
  for(let i=0;i<435;i++){
    const d=document.createElement('div');
    d.className='dot';
    d.style.cssText=`width:5px;height:5px;border-radius:50%;background:${i<220?'rgba(232,54,79,0.25)':'rgba(59,130,246,0.25)'};transition:background .3s`;
    d.dataset.party = i<220?'r':'d';
    hc.appendChild(d);
  }
  // Senate: 53 R, 45 D, 2 I
  for(let i=0;i<100;i++){
    const d=document.createElement('div');
    d.className='dot';
    const party = i<53?'r':(i<98?'d':'i');
    const col = party==='r'?'rgba(232,54,79,0.25)':(party==='d'?'rgba(59,130,246,0.25)':'rgba(240,168,48,0.25)');
    d.style.cssText=`width:7px;height:7px;border-radius:50%;background:${col};transition:background .3s`;
    d.dataset.party = party;
    sc.appendChild(d);
  }
}

function animateVote(hYea, hNay, sYea, sNay){
  const hDots = [...document.getElementById('houseVoteDots').children];
  const sDots = [...document.getElementById('senateVoteDots').children];

  // Shuffle for visual interest
  const hShuf = hDots.map((d,i)=>({d,i,r:Math.random()})).sort((a,b)=>a.r-b.r);
  const sShuf = sDots.map((d,i)=>({d,i,r:Math.random()})).sort((a,b)=>a.r-b.r);

  // Reset all to dim
  hDots.forEach(d=>d.style.background=d.dataset.party==='r'?'rgba(232,54,79,0.15)':'rgba(59,130,246,0.15)');
  sDots.forEach(d=>{
    const p=d.dataset.party;
    d.style.background=p==='r'?'rgba(232,54,79,0.15)':(p==='d'?'rgba(59,130,246,0.15)':'rgba(240,168,48,0.15)');
  });

  // Animate yeas
  hShuf.slice(0,hYea).forEach((item,i)=>{
    setTimeout(()=>item.d.style.background='var(--green)', i*4);
  });
  hShuf.slice(hYea,hYea+hNay).forEach((item,i)=>{
    setTimeout(()=>item.d.style.background='var(--red)', i*4);
  });
  sShuf.slice(0,sYea).forEach((item,i)=>{
    setTimeout(()=>item.d.style.background='var(--green)', i*12);
  });
  sShuf.slice(sYea,sYea+sNay).forEach((item,i)=>{
    setTimeout(()=>item.d.style.background='var(--red)', i*12);
  });
}

// ==============================
// RENDER BUDGET
// ==============================
function renderBudget(){
  const maxR = Math.max(...Object.values(S.rev));
  const maxS = Math.max(...Object.values(S.spend));

  document.getElementById('revItems').innerHTML = Object.entries(S.rev).map(([k,v])=>{
    const orig = DATA.revenue[k]||v;
    const cls = v>orig?'grew':'';
    return `<div class="b-item ${cls}"><div class="fill" style="width:${v/maxR*100}%;background:var(--green)"></div><span class="nm">${k}</span><span class="vl">${v.toLocaleString()}</span></div>`;
  }).join('');

  document.getElementById('spendItems').innerHTML = Object.entries(S.spend).map(([k,v])=>{
    const orig = DATA.spending[k]||v;
    const cls = v<orig?'cut':'';
    return `<div class="b-item ${cls}"><div class="fill" style="width:${v/maxS*100}%;background:var(--red)"></div><span class="nm">${k}</span><span class="vl">${v.toLocaleString()}</span></div>`;
  }).join('');

  S.tRev = Object.values(S.rev).reduce((a,b)=>a+b,0);
  S.tSpend = Object.values(S.spend).reduce((a,b)=>a+b,0);
  S.deficit = S.tSpend - S.tRev;

  document.getElementById('tRev').textContent = S.tRev.toLocaleString();
  document.getElementById('tSpend').textContent = S.tSpend.toLocaleString();

  const dp = document.getElementById('dPill');
  if(S.deficit>0){dp.className='deficit-pill neg';dp.innerHTML=`DEFICIT<br>-$${S.deficit.toLocaleString()}B`;}
  else{dp.className='deficit-pill pos';dp.innerHTML=`SURPLUS<br>+$${Math.abs(S.deficit).toLocaleString()}B`;}

  // Topbar
  document.getElementById('tbDeficit').textContent = S.deficit>0?`-$${S.deficit.toLocaleString()}B`:`+$${Math.abs(S.deficit).toLocaleString()}B`;
  document.getElementById('tbDeficit').style.color = S.deficit>0?'var(--red)':'var(--green)';
  const saved = DATA.deficit - S.deficit;
  document.getElementById('tbSaved').textContent = '$'+saved.toLocaleString()+'B';

  // Log stats
  const pct = Math.round(saved/DATA.deficit*100);
  document.getElementById('lsReduced').textContent = pct+'%';
  document.getElementById('lsPassed').textContent = S.passed;
  document.getElementById('lsConsensus').textContent = S.total>0?Math.round(S.passed/S.total*100)+'%':'‚Äî';
  document.getElementById('ls10yr').textContent = '$'+(saved*8/1000).toFixed(1)+'T';
}

// ==============================
// CHART
// ==============================
function drawChart(){
  const canvas = document.getElementById('mainChart');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio||1;
  canvas.width = canvas.offsetWidth*dpr;
  canvas.height = 260*dpr;
  ctx.scale(dpr,dpr);
  const w=canvas.offsetWidth, h=260;
  const p={t:10,r:20,b:28,l:48};
  const pw=w-p.l-p.r, ph=h-p.t-p.b;
  ctx.clearRect(0,0,w,h);

  const all=[...DATA.cboPath,...S.aiPath];
  const mn=Math.min(...all)-2, mx=Math.max(...all)+5;
  const xS=i=>p.l+(i/(DATA.years.length-1))*pw;
  const yS=v=>p.t+ph-((v-mn)/(mx-mn))*ph;

  // Grid
  ctx.strokeStyle='rgba(30,37,56,0.6)';ctx.lineWidth=.5;
  for(let i=0;i<6;i++){
    const y=p.t+(i/5)*ph;
    ctx.beginPath();ctx.moveTo(p.l,y);ctx.lineTo(p.l+pw,y);ctx.stroke();
    ctx.fillStyle='rgba(80,90,114,0.7)';ctx.font='10px IBM Plex Mono';ctx.textAlign='right';
    ctx.fillText('$'+(mx-(i/5)*(mx-mn)).toFixed(0)+'T',p.l-6,y+4);
  }
  ctx.fillStyle='rgba(80,90,114,0.7)';ctx.font='10px IBM Plex Mono';ctx.textAlign='center';
  DATA.years.forEach((yr,i)=>{if(i%2===0)ctx.fillText(yr,xS(i),h-6);});

  // CBO line
  ctx.setLineDash([6,4]);ctx.strokeStyle='rgba(232,54,79,0.6)';ctx.lineWidth=2;
  ctx.beginPath();DATA.cboPath.forEach((v,i)=>{i===0?ctx.moveTo(xS(i),yS(v)):ctx.lineTo(xS(i),yS(v));});ctx.stroke();
  ctx.setLineDash([]);
  // CBO fill
  ctx.fillStyle='rgba(232,54,79,0.04)';ctx.beginPath();
  ctx.moveTo(xS(0),yS(DATA.cboPath[0]));DATA.cboPath.forEach((v,i)=>ctx.lineTo(xS(i),yS(v)));
  ctx.lineTo(xS(10),yS(mn));ctx.lineTo(xS(0),yS(mn));ctx.closePath();ctx.fill();
  // CBO label
  ctx.fillStyle='rgba(232,54,79,0.7)';ctx.font='bold 11px IBM Plex Mono';ctx.textAlign='right';
  ctx.fillText('$'+DATA.cboPath[10].toFixed(1)+'T',xS(10)-4,yS(DATA.cboPath[10])-8);

  // AI path
  if(S.aiPath.length>1){
    ctx.strokeStyle='rgba(26,232,140,0.25)';ctx.lineWidth=8;
    ctx.beginPath();S.aiPath.forEach((v,i)=>{i===0?ctx.moveTo(xS(i),yS(v)):ctx.lineTo(xS(i),yS(v));});ctx.stroke();
    ctx.strokeStyle='#1ae88c';ctx.lineWidth=2.5;
    ctx.beginPath();S.aiPath.forEach((v,i)=>{i===0?ctx.moveTo(xS(i),yS(v)):ctx.lineTo(xS(i),yS(v));});ctx.stroke();
    // Fill
    ctx.fillStyle='rgba(26,232,140,0.06)';ctx.beginPath();
    ctx.moveTo(xS(0),yS(S.aiPath[0]));S.aiPath.forEach((v,i)=>ctx.lineTo(xS(i),yS(v)));
    ctx.lineTo(xS(S.aiPath.length-1),yS(mn));ctx.lineTo(xS(0),yS(mn));ctx.closePath();ctx.fill();
    // End dot
    const li=S.aiPath.length-1,lv=S.aiPath[li];
    ctx.beginPath();ctx.arc(xS(li),yS(lv),5,0,Math.PI*2);ctx.fillStyle='#1ae88c';ctx.fill();
    ctx.strokeStyle='rgba(26,232,140,0.3)';ctx.lineWidth=10;ctx.stroke();
    ctx.fillStyle='#1ae88c';ctx.font='bold 11px IBM Plex Mono';ctx.textAlign='left';
    ctx.fillText('$'+lv.toFixed(1)+'T',xS(li)+10,yS(lv)+4);
  }
}

// ==============================
// COMPUTE AI DEBT PATH
// ==============================
function computeAIPath(){
  const saved = DATA.deficit - S.deficit;
  const ramp=[0.25,0.45,0.65,0.8,0.9,0.97,1,1,1,1];
  const path=[36.4];
  for(let i=1;i<=10;i++){
    const eff=saved*(ramp[i-1]||1);
    const cboGrowth=DATA.cboPath[i]-DATA.cboPath[i-1];
    path.push(+(path[i-1]+cboGrowth-eff/1000).toFixed(1));
  }
  S.aiPath = path.slice(0, Math.min(S.round*1.5+2, 11));
}

// ==============================
// AGENT MESSAGES
// ==============================
const THINK={
  hamilton:['Scoring deficit reduction impact...','Modeling <span class="hl">debt service</span> trajectory...','Computing interest rate sensitivity...','Evaluating spending cut feasibility...'],
  keynes:['Running dynamic scoring model...','Analyzing <span class="hl">revenue elasticity</span>...','Projecting GDP multiplier effects...','Computing Laffer curve position...'],
  rawls:['Assessing <span class="hl">distributional impact</span>...','Modeling poverty rate effects...','Evaluating safety net adequacy...','Computing GINI coefficient shift...'],
  marshall:['Reviewing <span class="hl">force readiness</span> metrics...','Evaluating procurement efficiency...','Analyzing threat assessment matrix...','Computing NATO parity requirements...'],
  madison:['Building <span class="hl">consensus framework</span>...','Identifying compromise space...','Synthesizing multi-agent positions...','Computing Pareto optimal outcome...'],
};

function activateAgents(){
  ['hamilton','keynes','rawls','marshall','madison'].forEach((a,i)=>{
    setTimeout(()=>{
      document.getElementById('ag-'+a).classList.add('active');
      document.getElementById('msg-'+a).innerHTML=THINK[a][Math.floor(Math.random()*THINK[a].length)];
    },i*200);
  });
}
function deactivateAgents(){
  ['hamilton','keynes','rawls','marshall','madison'].forEach(a=>{
    document.getElementById('ag-'+a).classList.remove('active');
  });
}

// ==============================
// SIMULATION ENGINE
// ==============================
function beginSimulation(){
  document.getElementById('heroSection').style.display='none';
  document.getElementById('simSection').classList.add('active');
  initVoteDots();
  renderBudget();
  drawChart();
  window.addEventListener('resize',drawChart);

  setTimeout(()=>{
    S.running=true;
    runRound(1);
  },800);
}

function delay(ms){return ms/S.speed;}

function runRound(r){
  if(r>S.maxRounds){finish();return;}
  S.round=r;
  document.getElementById('roundTag').textContent=`ROUND ${r} / ${S.maxRounds}`;
  document.getElementById('budgetRound').textContent=`ROUND ${r}`;
  document.getElementById('progFill').style.width=((r-1)/S.maxRounds*100)+'%';

  activateAgents();

  const props = PROPOSALS.filter(p=>p.round===r);
  let d=delay(1800);
  props.forEach((prop,idx)=>{
    const t=setTimeout(()=>processProposal(prop),d);
    S.timers.push(t);
    d+=delay(3200);
  });

  const t2=setTimeout(()=>{
    deactivateAgents();
    computeAIPath();
    drawChart();
    runRound(r+1);
  },d+delay(400));
  S.timers.push(t2);
}

function processProposal(p){
  S.total++;
  // Apply
  for(const[k,v] of Object.entries(p.revŒî)) S.rev[k]=(S.rev[k]||0)+v;
  for(const[k,v] of Object.entries(p.spendŒî)) S.spend[k]=(S.spend[k]||0)+v;
  const passed = p.houseYea>217 && p.senYea>50;
  if(passed) S.passed++;

  renderBudget();
  animateVote(p.houseYea,p.houseNay,p.senYea,p.senNay);

  // Agent messages
  const map={HAMILTON:'hamilton',KEYNES:'keynes',RAWLS:'rawls',MARSHALL:'marshall',MADISON:'madison'};
  document.getElementById('msg-'+map[p.agent]).innerHTML=`Proposing: <span class="hl">${p.title}</span>`;

  // Log
  const log=document.getElementById('logScroll');
  if(S.total===1) log.innerHTML='';
  const entry=document.createElement('div');
  entry.className=`log-entry ${passed?'pass':'fail'}`;
  entry.innerHTML=`
    <div class="log-agent" style="color:${p.color}">Agent ${p.agent} ¬∑ Round ${p.round}</div>
    <div class="log-text"><strong>${p.title}</strong><br>${p.desc}</div>
    <div class="log-impact" style="color:${passed?'var(--green)':'var(--red)'}">${p.impact}</div>
    <div class="log-votes">House: ${p.houseYea}-${p.houseNay} ${p.houseYea>217?'‚úì':'‚úó'} ¬∑ Senate: ${p.senYea}-${p.senNay} ${p.senYea>50?'‚úì':'‚úó'}</div>
  `;
  log.appendChild(entry);
  log.scrollTop=log.scrollHeight;
}

function finish(){
  S.running=false;
  computeAIPath();
  // Extend to full 11
  while(S.aiPath.length<11){const l=S.aiPath[S.aiPath.length-1];S.aiPath.push(+(l-0.2).toFixed(1));}
  drawChart();
  deactivateAgents();

  document.getElementById('progFill').style.width='100%';
  document.getElementById('roundTag').textContent='COMPLETE';

  // Final agent messages
  const saved=DATA.deficit-S.deficit;
  document.getElementById('msg-hamilton').innerHTML=`<span class="hl">Deficit cut ${Math.round(saved/DATA.deficit*100)}%.</span> Mission accomplished.`;
  document.getElementById('msg-keynes').innerHTML=`<span class="hl">Revenue optimized</span> while preserving growth.`;
  document.getElementById('msg-rawls').innerHTML=`<span class="hl">Safety net intact.</span> Coverage maintained.`;
  document.getElementById('msg-marshall').innerHTML=`<span class="hl">Readiness preserved.</span> Procurement modernized.`;
  document.getElementById('msg-madison').innerHTML=`<span class="hl">Unanimous framework adopted.</span>`;

  // Summary log entry
  const log=document.getElementById('logScroll');
  const e=document.createElement('div');e.className='log-entry info';
  e.innerHTML=`
    <div class="log-agent" style="color:var(--cyan)">COUNCIL SUMMARY</div>
    <div class="log-text"><strong>Consensus reached.</strong> ${S.passed} proposals passed across ${S.maxRounds} rounds. Annual deficit reduced by $${saved.toLocaleString()}B (${Math.round(saved/DATA.deficit*100)}%). Projected 10-year savings: $${(saved*8/1000).toFixed(1)}T.</div>
    <div class="log-impact" style="color:var(--cyan)">Time elapsed: ~90 seconds. Congress time elapsed: 24 years and counting.</div>
  `;
  log.appendChild(e);log.scrollTop=log.scrollHeight;

  // Populate results
  document.getElementById('rAISaved').textContent='$'+saved.toLocaleString()+'B';
  document.getElementById('rAIDeficit').textContent=S.deficit>0?'$'+S.deficit.toLocaleString()+'B':'SURPLUS';
  document.getElementById('rAIDebt2035').textContent='$'+S.aiPath[10].toFixed(1)+'T';

  // Show results after delay
  setTimeout(()=>{
    document.getElementById('resultsSection').classList.add('active');
    document.getElementById('resultsSection').scrollIntoView({behavior:'smooth'});

    // Share URL
    const txt=encodeURIComponent(`5 AI agents just solved America's $${(saved/1000).toFixed(1)}T deficit problem in 90 seconds. 535 members of Congress haven't done it in 24 years.\n\nWatch the simulation:`);
    document.getElementById('shareTwitter').href=`https://twitter.com/intent/tweet?text=${txt}`;
  },2000);
}

function toggleSpeed(){
  S.speed = S.speed===1?3:1;
  document.getElementById('speedBtn').textContent=S.speed+'√ó Speed';
}

function copyLink(){
  navigator.clipboard.writeText(window.location.href).then(()=>{
    const btn=event.target;btn.textContent='Copied!';setTimeout(()=>btn.textContent='Copy Link',2000);
  });
}

function resetAll(){
  S.timers.forEach(t=>clearTimeout(t));
  S=reset();
  document.getElementById('heroSection').style.display='';
  document.getElementById('simSection').classList.remove('active');
  document.getElementById('resultsSection').classList.remove('active');
  deactivateAgents();
  ['hamilton','keynes','rawls','marshall','madison'].forEach(a=>{
    document.getElementById('msg-'+a).textContent='Standing by...';
  });
  window.scrollTo({top:0,behavior:'smooth'});
}

// Init
renderBudget();
</script>
</body>
</html>
